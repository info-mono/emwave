#!/bin/sh


TEXT="${1:-/\\}"

while [ "${#TEXTS}" -le '75' ]; do
	TEXTS="$TEXTS$TEXT"
done

TEXTS=$(printf '%s' "$TEXTS" | sed -e 's/^\(.\{75\}\).*/\1/')


i='0'

while [ -n "$TEXTS" ]; do
	charater=$(echo "$TEXTS" | sed -e 's/^\(.\{1\}\).*/\1/')
	TEXTS="${TEXTS#?}"

	case "$charater" in
		'\') charater='\\' ;;
		'%') charater='%%' ;;
	esac

	r=$(( 255 - ( i * ( 255 / 76 ) ) ))
	g=$((         i * ( 512 / 76 )   ))
	b=$((         i * ( 255 / 76 )   ))

	[ "$g" -gt 255 ] && g=$(( 510 - g ))

	rr=$(( 255 - r ))
	gg=$(( 255 - g ))
	bb=$(( 255 - b ))

	print="$print\033[48;2;${r};${g};${b}m\033[38;2;${rr};${gg};${bb}m$charater\033[0m"

	i=$(( i + 1 ))
done

printf '%b' "$print"


#
# [48;2;255;0;0m[38;2;0;255;255m [0m[48;2;252;6;3m[38;2;3;249;252me[0m[48;2;249;12;6m[38;2;6;243;249mm[0m[48;2;246;18;9m[38;2;9;237;246mw[0m[48;2;243;24;12m[38;2;12;231;243ma[0m[48;2;240;30;15m[38;2;15;225;240mv[0m[48;2;237;36;18m[38;2;18;219;237me[0m[48;2;234;42;21m[38;2;21;213;234m [0m[48;2;231;48;24m[38;2;24;207;231m [0m[48;2;228;54;27m[38;2;27;201;228me[0m[48;2;225;60;30m[38;2;30;195;225mm[0m[48;2;222;66;33m[38;2;33;189;222mw[0m[48;2;219;72;36m[38;2;36;183;219ma[0m[48;2;216;78;39m[38;2;39;177;216mv[0m[48;2;213;84;42m[38;2;42;171;213me[0m[48;2;210;90;45m[38;2;45;165;210m [0m[48;2;207;96;48m[38;2;48;159;207m [0m[48;2;204;102;51m[38;2;51;153;204me[0m[48;2;201;108;54m[38;2;54;147;201mm[0m[48;2;198;114;57m[38;2;57;141;198mw[0m[48;2;195;120;60m[38;2;60;135;195ma[0m[48;2;192;126;63m[38;2;63;129;192mv[0m[48;2;189;132;66m[38;2;66;123;189me[0m[48;2;186;138;69m[38;2;69;117;186m [0m[48;2;183;144;72m[38;2;72;111;183m [0m[48;2;180;150;75m[38;2;75;105;180me[0m[48;2;177;156;78m[38;2;78;99;177mm[0m[48;2;174;162;81m[38;2;81;93;174mw[0m[48;2;171;168;84m[38;2;84;87;171ma[0m[48;2;168;174;87m[38;2;87;81;168mv[0m[48;2;165;180;90m[38;2;90;75;165me[0m[48;2;162;186;93m[38;2;93;69;162m [0m[48;2;159;192;96m[38;2;96;63;159m [0m[48;2;156;198;99m[38;2;99;57;156me[0m[48;2;153;204;102m[38;2;102;51;153mm[0m[48;2;150;210;105m[38;2;105;45;150mw[0m[48;2;147;216;108m[38;2;108;39;147ma[0m[48;2;144;222;111m[38;2;111;33;144mv[0m[48;2;141;228;114m[38;2;114;27;141me[0m[48;2;138;234;117m[38;2;117;21;138m [0m[48;2;135;240;120m[38;2;120;15;135m [0m[48;2;132;246;123m[38;2;123;9;132me[0m[48;2;129;252;126m[38;2;126;3;129mm[0m[48;2;126;252;129m[38;2;129;3;126mw[0m[48;2;123;246;132m[38;2;132;9;123ma[0m[48;2;120;240;135m[38;2;135;15;120mv[0m[48;2;117;234;138m[38;2;138;21;117me[0m[48;2;114;228;141m[38;2;141;27;114m [0m[48;2;111;222;144m[38;2;144;33;111m [0m[48;2;108;216;147m[38;2;147;39;108me[0m[48;2;105;210;150m[38;2;150;45;105mm[0m[48;2;102;204;153m[38;2;153;51;102mw[0m[48;2;99;198;156m[38;2;156;57;99ma[0m[48;2;96;192;159m[38;2;159;63;96mv[0m[48;2;93;186;162m[38;2;162;69;93me[0m[48;2;90;180;165m[38;2;165;75;90m [0m[48;2;87;174;168m[38;2;168;81;87m [0m[48;2;84;168;171m[38;2;171;87;84me[0m[48;2;81;162;174m[38;2;174;93;81mm[0m[48;2;78;156;177m[38;2;177;99;78mw[0m[48;2;75;150;180m[38;2;180;105;75ma[0m[48;2;72;144;183m[38;2;183;111;72mv[0m[48;2;69;138;186m[38;2;186;117;69me[0m[48;2;66;132;189m[38;2;189;123;66m [0m[48;2;63;126;192m[38;2;192;129;63m [0m[48;2;60;120;195m[38;2;195;135;60me[0m[48;2;57;114;198m[38;2;198;141;57mm[0m[48;2;54;108;201m[38;2;201;147;54mw[0m[48;2;51;102;204m[38;2;204;153;51ma[0m[48;2;48;96;207m[38;2;207;159;48mv[0m[48;2;45;90;210m[38;2;210;165;45me[0m[48;2;42;84;213m[38;2;213;171;42m [0m[48;2;39;78;216m[38;2;216;177;39m [0m[48;2;36;72;219m[38;2;219;183;36me[0m[48;2;33;66;222m[38;2;222;189;33mm[0m
#                          [3mEmwave with custom string[0m
#
# [1mUsage:[0m
#     sh -c "$(curl -fsLS https://info-mono.github.io/emwave)" -- <string>
#
# [1mAbout:[0m 
#     Emwave script is originally written by Ilya144 as a pull request for Color-Scripts.
#     This is an enhanced version of it with option to set display string.
#
# [1mURL:[0m [3;4;96mhttps://github.com/info-mono/emwave[0m
